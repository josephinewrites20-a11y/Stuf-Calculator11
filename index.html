<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stuf Storage Revenue Calculator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; max-width: 700px; margin: 30px auto; }
    label { display: block; margin-top: 12px; font-weight: bold; }
    input, select, button { padding: 8px; margin-top: 6px; width: 100%; }
    #result { 
      margin-top: 20px; 
      padding: 20px; 
      border: 1px solid #ccc; 
      border-radius: 6px; 
      text-align: center; 
      font-size: 20px; 
      color: #333; 
      filter: blur(6px);
      pointer-events: none;
    }
    #popup {
      display: none;
      position: fixed; 
      top: 0; left: 0; width: 100%; height: 100%; 
      background: rgba(0,0,0,0.6); 
      justify-content: center; 
      align-items: center;
    }
    #popupContent {
      background: #fff; padding: 20px; border-radius: 8px; width: 300px; text-align: center;
    }
    #downloadBtn { display: none; margin-top: 20px; padding: 10px; background: #0073e6; color: #fff; border: none; cursor: pointer; border-radius: 4px; }
  </style>
</head>
<body>
  <h2>Stuf Storage Ancillary Revenue Calculator</h2>

  <label for="space">Available Space (sq ft)</label>
  <input type="number" id="space" placeholder="e.g. 5000">

  <label for="property">Property Type</label>
  <select id="property">
    <option value="Office">Office</option>
    <option value="Multifamily">Multifamily</option>
    <option value="Retail">Retail</option>
    <option value="Mixed-use">Mixed-use</option>
    <option value="Industrial">Industrial</option>
    <option value="Hotel">Hotel</option>
  </select>

  <label for="market">Market</label>
  <select id="market">
    <option value="NY">New York</option>
    <option value="Boston">Boston</option>
    <option value="DC">Washington DC</option>
    <option value="SF">San Francisco</option>
    <option value="LA">Los Angeles</option>
    <option value="ATL">Atlanta</option>
    <option value="SEA">Seattle</option>
  </select>

  <button onclick="calculateRevenue()">Calculate</button>

  <div id="result">Estimated Revenue: $XX,XXX</div>
  <button id="downloadBtn" onclick="downloadPDF()">Download My Report</button>

  <!-- Popup -->
  <div id="popup">
    <div id="popupContent">
      <h3>Enter your email to view your full report</h3>
      <input type="email" id="email" placeholder="your@email.com">
      <button onclick="submitEmail()">Submit</button>
    </div>
  </div>

<script>
let finalRevenue = 0;
let landlordInputs = {};

function calculateRevenue() {
  const sf = document.getElementById("space").value;
  const property = document.getElementById("property").value;
  const market = document.getElementById("market").value;

  if (!sf) {
    alert("Please enter space in sq ft.");
    return;
  }

  const efficiency = 0.7;

  // Rent logic by market
  let rent;
  if (market === "NY") {
    rent = 30;
  } else if (market === "ATL" || market === "SEA") {
    rent = 15;
  } else {
    rent = 20;
  }

  const storageSF = sf * efficiency;
  finalRevenue = storageSF * rent;

  landlordInputs = { sf, property, market, efficiency: efficiency * 100 + "%", rent };

  document.getElementById("result").style.filter = "blur(6px)";
  document.getElementById("popup").style.display = "flex";
}

function submitEmail() {
  const email = document.getElementById("email").value;
  if (!email) { alert("Please enter your email."); return; }

  landlordInputs.email = email;

  document.getElementById("popup").style.display = "none";
  document.getElementById("downloadBtn").style.display = "block";
}

function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(16);
  doc.text("Stuf Storage Ancillary Revenue Report", 20, 20);

  doc.setFontSize(12);
  doc.text(`Available Space: ${landlordInputs.sf} sq ft`, 20, 40);
  doc.text(`Property Type: ${landlordInputs.property}`, 20, 50);
  doc.text(`Market: ${landlordInputs.market}`, 20, 60);
  doc.text(`Efficiency Rate: ${landlordInputs.efficiency}`, 20, 70);
  doc.text(`Applied Rent: $${landlordInputs.rent}/sf`, 20, 80);

  doc.setFontSize(14);
  doc.text(`Estimated Revenue: $${finalRevenue.toLocaleString()}`, 20, 100);

  doc.save("Stuf_Revenue_Report.pdf");
}
</script>
</body>
</html>
